# 🌌 SoulChart - מערכת ניתוח רוחני אינטגרטיבי

## ✨ סקירה כללית

**SoulChart** (תרשים הנשמה) הוא מערכת Python מתקדמת ומודולרית לניתוח הוליסטי ומעמיק של אדם, המשלבת שלושה עולמות תוכן:

- 🔤 **קבלה ונומרולוגיה** - ניתוח שמות עבריים
- ⭐ **אסטרולוגיה נטאלית** - מפות לידה מפורטות
- 🌍 **אסטרולוגיה טרנזיטית** - מעברים אסטרולוגיים עכשוויים ועתידיים

המערכת מספקת דוחות טקסטואליים מקיפים ויזואליזציות גרפיות מתקדמות של מפות אסטרולוגיות.

---

## 🎯 יכולות המערכת

### 1. ניתוח קבלי ונומרולוגי (שם)
**מודול:** `name_analysis`

- ניתוח מעמיק של שמות עבריים על בסיס:
  - **אותיות** - משמעות כל אות בשם
  - **ניקוד** - השפעת הניקוד על האות
  - **יסודות** - חלוקה לארבעת היסודות (אש, אוויר, מים, אדמה)
  - **מיקום האות** - משמעות שונה לאות ראשונה, שנייה, שלישית ורביעית+
- שילובים מתקדמים:
  - אות + ניקוד
  - אות + מיקום
  - ניקוד + מיקום
  - אות + ניקוד + מיקום

### 2. ניתוח אסטרולוגי - מפת לידה (Natal Chart)
**מודול:** `birth_chart_analysis`

#### חישובים מדויקים:
- **10 כוכבים קלאסיים**: שמש, ירח, מרקורי, ונוס, מאדים, צדק, שבתאי, אורנוס, נפטון, פלוטו
- **נקודות מיוחדות**: ראש דרקון, לילית, כירון
- **נקודות רגישות**: 
  - אופק (Ascendant/AC) - המזל העולה
  - רום שמיים (Midheaven/MC)
  - פורטונה (Part of Fortune)
  - ורטקס (Vertex)
- **12 בתים אסטרולוגיים** - חישוב מדויק של כל קווי היתד (House Cusps)
- **זיהוי נסיגות** (Retrograde) - כל הכוכבים מסומנים (R) בזמן נסיגה

#### ניתוח היבטים מתקדם:
- **11 סוגי היבטים**:
  - מז'וריים: Conjunction (0°), Opposition (180°), Trine (120°), Square (90°), Sextile (60°)
  - משניים: Inconjunct (150°), Semi-Sextile (30°), Semi-Square (45°), Sesquiquadrate (135°), Quintile (72°), Biquintile (144°)
- **אורבים מותאמים** - כל היבט עם רדיוס השפעה ייחודי
- **זיהוי מזלות כלואים** (Intercepted Signs)

#### שיטת "שזירת השליטים" (Ruler Analysis):
שיטה ייחודית המנתחת את המפה בשישה פרמטרים:
1. כוכב במזל (Planet in Sign)
2. כוכב בבית (Planet in House)
3. בית במזל (House in Sign)
4. שילוב משולש: כוכב בבית במזל (Planet-House-Sign)
5. שליט מזל בבית (Ruler of Sign in House) - "House-to-House Analysis"
6. היבטים בין כוכבים (Aspects)

#### ויזואליזציה גרפית:
- **ציור מפת לידה אוטומטי** (`BirthChartDrawer.py`):
  - מעגל מזלות עם סמלי מזלות (♈♉♊♋♌♍♎♏♐♑♒♓)
  - מיקום כוכבים עם סמלים (☉☽☿♀♂♃♄♅♆♇)
  - קווי יתד של 12 הבתים
  - קווי היבטים צבעוניים בין כוכבים
  - תווית מזל עולה (AC) ורום שמיים (MC)
  - טבלת מיקומים מפורטת

### 3. אסטרולוגיה טרנזיטית (Transits)
**מודול:** `TransitCalculator`

#### ניתוח מעברים נוכחיים:
- חישוב מיקומי כוכבים **בזמן אמת**
- השוואה למפת הלידה (Natal vs Transit)
- זיהוי כל ההיבטים הפעילים כרגע
- **ויזואליזציה Bi-Wheel** - מפה כפולה (נטאל + טרנזיט)

#### חישוב טרנזיטים עתידיים:
- תחזית מעברים בטווח זמן נתון (ימים/חודשים/שנים)
- **מחזור חיים של היבט** (Aspect Lifecycle):
  - תאריך התחלה (Aspect enters orb)
  - תאריך מדויק (Exact)
  - תאריך סיום (Aspect exits orb)
  - זמן השפעה כולל
- **זיהוי נסיגות** (Retrograde Motion):
  - היבטים שחוזרים 3 פעמים (Direct → Retrograde → Direct)
  - תאריכים מדויקים לכל שלב
- **מחוון התקדמות ויזואלי**:
  - סרגל התקדמות: `[████████░░] 80.0% (מתחזק)`
  - מצב: מתחזק (Applying) / נחלש (Separating)
- **סינון אינטליגנטי**: הסתרת היבטים חלשים/לא רלוונטיים

#### תכונות מתקדמות:
- שמירת תוצאות ב-JSON ו-TXT
- טיפול חכם בפלנטות מהירות (ירח, שמש) לעומת איטיות (פלוטו, נפטון)
- אופטימיזציה לטווחי זמן ארוכים (עד 5 שנים)

---

## 🛠️ מבנה הפרויקט

```
SoulChart/
├── data/                           # 📁 קבצי נתונים טקסטואליים
│   ├── ephe/                       # אפמריס (Swiss Ephemeris)
│   ├── letters.txt                 # נתוני אותיות
│   ├── nikud.txt                   # נתוני ניקוד
│   ├── element.txt                 # נתוני יסודות
│   ├── letters_by_position.txt     # אותיות לפי מיקום
│   ├── element_by_position.txt     # יסודות לפי מיקום
│   ├── nikud_by_position.txt       # ניקוד לפי מיקום
│   ├── letters_by_nikud.txt        # אותיות לפי ניקוד
│   ├── letters_by_nikud_position.txt # משולב
│   ├── planets.txt                 # פרשנויות כוכבים
│   ├── signs.txt                   # פרשנויות מזלות
│   ├── houses.txt                  # פרשנויות בתים
│   ├── planet_in_sign.txt          # כוכב במזל
│   ├── planet_in_house.txt         # כוכב בבית
│   ├── house_in_sign.txt           # בית במזל
│   ├── planet_house_sign.txt       # שילוב משולש
│   ├── house_to_house.txt          # שליט בבית
│   ├── aspects.txt                 # פרשנויות היבטים נטאליים
│   ├── aspects_transit.txt         # פרשנויות היבטים טרנזיטיים
│   ├── chart_rulers.txt            # שליטי מזל עולה
│   └── sun_moon_ascendant.txt      # משולש מרכזי
│
├── output/                         # 📁 תיקיית פלט (נוצרת אוטומטית)
│   ├── names/                      # דוחות ניתוח שמות
│   ├── charts/                     # דוחות ומפות לידה
│   ├── transits/                   # דוחות טרנזיטים
│   └── user_data/                  # נתוני משתמשים
│
├── src/                            # 📁 קוד מקור
│   ├── name_analysis/              # 🔤 מודול ניתוח שמות
│   │   ├── __init__.py
│   │   ├── NameAnalysis.py         # מחלקה ראשית
│   │   └── NameDataLoaders.py      # טעינת נתוני שמות
│   │
│   ├── birth_chart_analysis/       # ⭐ מודול מפות לידה
│   │   ├── __init__.py
│   │   ├── ChartAnalysis.py        # מחלקה ראשית לניתוח
│   │   ├── CalculationEngine.py    # מנוע חישוב (pyswisseph)
│   │   ├── ChartDataLoaders.py     # טעינת נתונים אסטרולוגיים
│   │   ├── BirthChartDrawer.py     # ציור מפות (matplotlib)
│   │   └── TransitCalculator.py    # חישוב טרנזיטים
│   │
│   ├── main.py                         # 🚀 הרצה ראשית (שם + מפת לידה)
│   ├── transit_main.py                 # 🌍 הרצה לטרנזיטים
│   ├── user.py                     # מחלקת משתמש
│   └── utils.py                    # פונקציות עזר
│
├── requirements.txt                # תלויות
├── bot.py                          # בוט טלגרם אינטרקטיבי
└── README.md                       # תיעוד זה
```

---

## 📦 דרישות והתקנה

### תלויות נדרשות:

| ספרייה | תפקיד |
|--------|-------|
| **`pyswisseph`** | מנוע אפמריס מדויק לחישובים אסטרולוגיים |
| **`matplotlib`** | ציור מפות לידה גרפיות |
| **`numpy`** | חישובים נומריים |
| **`pytz`** | ניהול אזורי זמן |

### התקנה:

```bash
# שכפול הפרויקט
git clone <repository-url>
cd SoulChart

# יצירת סביבה וירטואלית (מומלץ)
python -m venv venv
source venv/bin/activate  # Linux/Mac
# או
venv\Scripts\activate     # Windows

# התקנת תלויות
pip install -r requirements.txt
```

**תוכן `requirements.txt`:**
```
pyswisseph>=2.10.3
matplotlib>=3.7.0
numpy>=1.24.0
pytz>=2023.3
```

### הכנת קבצי Ephemeris:

1. צור תיקייה: `data/ephe/`
2. הורד קבצי אפמריס מ-[Swiss Ephemeris](https://www.astro.com/swisseph/swephinfo_e.htm)
3. העתק את הקבצים לתיקייה (לפחות: `sepl_18.se1`, `semo_18.se1`, `seas_18.se1`)

---

## 🚀 הפעלה ושימוש

### מצב 1: ניתוח מלא (שם + מפת לידה)

```bash
python main.py
```

**קלט נדרש:**
1. שם פרטי (בעברית)
2. תאריך לידה (YYYY-MM-DD)
3. שעת לידה (HH:MM)
4. מיקום לידה (Latitude, Longitude)
5. ניקוד השם (אינטראקטיבי)
6. בחירת סוג דוח (עם/בלי פרשנות)

**פלט:**
- `output/names/{name}_name.txt` - דוח ניתוח שם
- `output/charts/{name}_chart_interpreted.txt` / `_positions.txt` - דוח מפת לידה
- `output/charts/{name}_chart.png` - תמונת מפת הלידה

### מצב 2: ניתוח טרנזיטים

```bash
python transit_main.py
```

**בחירת תת-מצב:**
1. **טרנזיטים נוכחיים** - מה קורה עכשיו
2. **טרנזיטים עתידיים** - תחזית לטווח מבוקש

**קלט נדרש:**
- נתוני לידה (כמו במצב 1)
- מיקום נוכחי (עבור חישוב בתים)
- טווח תאריכים (עבור תחזית)

**פלט:**
- `output/transits/Natal_{date}_Transit_to_{date}.txt` - דוח מפורט
- `output/transits/Natal_{date}_Transit_to_{date}.json` - נתונים מובנים
- `output/transits/...biwheel.png` - מפה כפולה (נטאל+טרנזיט)

---

## 📊 דוגמאות פלט

### דוח ניתוח שם:
```
האות הראשונה בשם יוסף היא י' בניקוד חיריק

האות הראשונה בשם מייצגת:
1. את המוח ואת הראש הפיזי.
2. את האינטליגנציה.
...

האות י' - 
...משמעות קבלית...

יסוד האוויר
...תיאור היסוד...
```

### דוח מפת לידה (Interpreted):
```
================================================================================
מפת הלידה של יוסף
תאריך: 1990-05-15 | שעה: 14:30 | מיקום: 32.08°N, 34.78°E
================================================================================

* מזל עולה (Ascendant): בתולה 12°34'
* רום שמיים (Midheaven): תאומים 08°22'
* שליט המפה: מרקורי

* מיקומי כוכבים ונקודות:

    - שמש      : 24°18' בשור (בית 9)
    - ירח       : 15°42' בדלי (בית 6)
    - מרקורי    : 08°55' בתאומים (R) (בית 10)
    ...

================================================================================
היבטים נטאליים (Natal Aspects)
================================================================================

📐 שמש משולש ירח - אורב: 1.5° | עוצמה: [████████░░] 85.0%
   🔍 אופי: הרמוני | סוג: Major

   💫 פרשנות: האדם חווה הרמוניה פנימית בין הרצון והרגש...
```

### דוח טרנזיטים עתידיים:
```
📅 תקופה: 2025-11-02 עד 2025-12-02 (30 ימים)
🌍 מיקום: 32.08°N, 34.78°E

================================================================================
טרנזיטים עתידיים (4 היבטים נמצאו)
================================================================================

🔮 1. צדק (טרנזיט) משולש שמש (נטאל)
   📊 היבט: Trine (120°) | אורב מקסימלי: 8.0°
   ⏱️ משך השפעה: 45 ימים
   
   📅 ציר זמן:
      🟢 התחלה: 2025-11-05 08:15
      ⭐ מדויק:  2025-11-22 14:30 (אורב: 0.1°)
      🔴 סיום:   2025-12-20 19:45
   
   📍 מצב נוכחי (2025-11-02):
      [███░░░░░░░] 30.0% (מתחזק)
      אורב נוכחי: 5.6°
   
   💫 פרשנות: תקופת צמיחה והרחבה אופקים...
```

---

## 🎨 תכונות מתקדמות

### 1. מצבי דיווח גמישים
- **עם פרשנות** - דוח מפורט עם הסברים אסטרולוגיים מלאים
- **ללא פרשנות** - רק נתונים טכניים (מיקומים, זוויות, אורבים)

### 2. טיפול חכם בנתונים
- נירמול אותיות סופיות (ך→כ, ם→מ וכו')
- המרות אוטומטיות בין פורמטים
- זיהוי וטיפול בשגיאות קלט

### 3. אופטימיזציה
- טעינת נתונים חד-פעמית (Class Variables)
- מטמון תוצאות ביניים
- חישובים מקבילים לטרנזיטים ארוכי טווח

### 4. ויזואליזציה מתקדמת
- **Single Wheel** - מפת לידה בודדת
- **Bi-Wheel** - מפת לידה + טרנזיט
- קווי היבטים צבעוניים לפי סוג
- סמלי מזלות וכוכבים אוניברסליים

---

## 🔧 פיתוח והרחבה

### הוספת נתוני פרשנות חדשים:
1. ערוך את הקבצים בתיקיית `data/`
2. שמור בקידוד `UTF-8-sig`
3. הפעל מחדש - הנתונים ייטענו אוטומטית

### הוספת כוכבים/נקודות נוספות:
ערוך את `CalculationEngine.py`:
```python
PLANET_IDS_FOR_TRANSIT = {
    'שם_כוכב': swe.PLANET_ID,
    ...
}
```

### התאמת אורבים:
ערוך את `CalculationEngine.py`:
```python
ASPECT_ORBS = {
    'Conjunction': 10.0,  # שנה כרצונך
}
```

---

## 🐛 פתרון בעיות

### שגיאת "ephemeris files not found"
- ודא שקבצי האפמריס נמצאים ב-`data/ephe/`
- הורד את הקבצים הנדרשים מ-astro.com

### שגיאת קידוד עברי
- שמור קבצי נתונים ב-`UTF-8-sig`
- ודא שהטרמינל תומך בעברית

### ציור מפות לא מוצג נכון
- התקן גופן עברי תקני (Arial, David וכו')
- `matplotlib` עשוי לדרוש הגדרות נוספות ב-Linux

---

## 📝 רישיון ויוצר

**פותח על ידי:** עמיחי בנילוז

**גרסה:** 3.6

**עדכון אחרון:** נובמבר 2025

---

## 🌟 תכניות עתידיות

- [ ] ממשק גרפי (GUI)
- [ ] ייצוא ל-PDF מעוצב
- [ ] אינטגרציה עם API חיצוני
- [ ] תמיכה בשפות נוספות
- [ ] מצב דוח משפחתי (Synastry)
- [ ] חישוב פרוגרסים (Secondary Progressions)
- [ ] Solar/Lunar Returns

---

## 📧 יצירת קשר ותמיכה

לשאלות, הצעות או דיווח על באגים:
- צור Issue בגיטהאב
- צור קשר ישיר עם המפתח

---

**הערה:** מערכת זו מיועדת למטרות חינוכיות ומחקר רוחני. אין להשתמש בה כתחליף לייעוץ מקצועי רפואי, פסיכולוגי או משפטי.